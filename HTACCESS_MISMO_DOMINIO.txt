<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # Redirigir todas las peticiones /api al backend Node.js
  RewriteCond %{REQUEST_URI} ^/api/
  RewriteRule ^api/(.*)$ http://localhost:PUERTO_PASSENGER/api/$1 [P,L]
  
  # Si no es /api, servir archivos estáticos del frontend
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.html [L]
</IfModule>

# Habilitar proxy si está disponible
<IfModule mod_proxy.c>
  ProxyPreserveHost On
  ProxyPass /api http://localhost:PUERTO_PASSENGER/api
  ProxyPassReverse /api http://localhost:PUERTO_PASSENGER/api
</IfModule>
